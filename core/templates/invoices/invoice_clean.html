<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Facture {{ invoice.invoice_number }}</title>
    <style>
        body { font-family: 'Helvetica Neue', 'Arial', sans-serif; font-size: 11px; line-height: 1.6; color: #444; }
        .container { max-width: 800px; margin: 40px auto; padding: 30px; }
        .invoice-details { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; }
        .invoice-details h1 { font-size: 24px; font-weight: bold; margin: 0; }
        .invoice-info p, .client-info p { margin: 2px 0; }
        .details-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .details-grid div { padding: 10px; }
        .details-grid strong { color: #555; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { font-weight: bold; }
        .total-row td { border-top: 2px solid #000; font-size: 16px; font-weight: bold; }
        .note { margin-top: 50px; padding: 20px; background-color: #f9f9f9; border-left: 3px solid #ccc; }
    </style>
</head>
<body>
    <div class="container">
        <div class="invoice-details">
            <div>
                {% if company.logo %}
                   <img src="{{ company.logo.url }}" alt="Logo" style="max-height: 80px; width: auto;">
                {% endif %}
                <p><strong>{{ company.name }}</strong></p>
                <p>{{ company.address|linebreaksbr }}</p>
                <p>Email: {{ company.email }}</p>
                <p>Tél: {{ company.phone }}</p>
            </div>
            <div class="text-right">
                <h1>FACTURE</h1>
                <p><strong>N°:</strong> {{ invoice.invoice_number }}</p>
                <p><strong>Date:</strong> {{ invoice.issue_date|date:"d M Y" }}</p>
                <p><strong>Échéance:</strong> {{ invoice.due_date|date:"d M Y" }}</p>
            </div>
        </div>

        <div class="details-grid">
            <div>
                <strong>Facturé à:</strong>
                <p>{{ client.name }}</p>
                <p>{{ client.address|linebreaksbr }}</p>
                <p>Email: {{ client.email }}</p>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Description</th>
                    <th style="text-align: right;">Quantité</th>
                    <th style="text-align: right;">Prix unitaire</th>
                    <th style="text-align: right;">Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in invoice_items %}
                    <tr>
                        <td>{{ item.description }}</td>
                        <td style="text-align: right;">{{ item.quantity }}</td>
                        <td style="text-align: right;">{{ item.unit_price }} F CFA</td>
                        <td style="text-align: right;">{{ item.total_price }} F CFA</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">Aucun article dans cette facture.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div style="width: 300px; margin-left: auto; margin-top: 20px;">
            <p style="text-align: right; margin-bottom: 5px;">Sous-total: {{ invoice.subtotal }} F CFA</p>
            <p style="text-align: right; margin-bottom: 5px;">Remise ({{ invoice.discount }}%): -{{ discount_amount }} F CFA</p>
            <p style="text-align: right; margin-bottom: 5px;">TVA: {{ invoice.tax_amount }} F CFA</p>
            <p style="text-align: right; margin-bottom: 5px;">Frais de port: {{ invoice.shipping_cost }} F CFA</p>
            <p style="text-align: right; font-size: 16px; font-weight: bold; border-top: 2px solid #000; padding-top: 10px;">TOTAL: {{ invoice.total_amount }} F CFA</p>
        </div>
        
        {% if invoice.notes %}
            <div class="note">
                <p><strong>Notes:</strong></p>
                <p>{{ invoice.notes|linebreaksbr }}</p>
            </div>
        {% endif %}
    </div>
</body>
</html>